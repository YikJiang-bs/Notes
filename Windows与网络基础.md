## Windows 基础命令

### 一、目录和文件的应用操作

#### 1、cd命令

```powershell
cd /d d:\    //切换到d盘目录，因为改变了驱动器，所以要加上/d选项
cd c:\  //如果没有改变驱动器号，就不需要加/d选项
```



- 目录分为相对路径和绝对路径
  - 相对路径（以当前为起点）
    - “.”代表是当前路径
    - “../”代表的是当前的上一级目录
  - 绝对路径（以驱动器号为起点） 

####  2、dir命令

- 用于显示目录和文件列表

- 常用的用法直接使用dir

  ```powershell
  dir /a:h c:\  #查看c盘下的隐藏目录和文件
  ```

#### 3、md 或 mkdir

- 创建目录（文件夹），也可以直接创建多级子目录

  - ```powershell
    md 公司文件
    md 公司文件夹\技术部\技术文件夹 
    ```

#### 4、rd 或 rmdir

- 用于删除目录

  - ```powershell
    rd 文件名
    rd /s /q	文件名  #如果要删除的目录下有子目录或者文件需要使用/s，可以使用/q选择不提醒 
    ```

    

#### 5、move

- 用于移动，重命名

  - ```powershell
    d:\>move 文件名 c:\		#移动
    d:\move c:\文件名 c：新文件名	#重命名
    ```

#### 6、copy

- 用于复制文件

  ```powershell
  d:\>copy c:\文件名  d:\文件名	#直接复制文件到指定目录
  d:\copy 1.text+2.text 3.text #将两个文件中的内容直接融合到新的文件中
  ```

#### 7、xcopy

- 用于复制目录

  ```powershell
  d:\xcopy /s 文件名 c:\
  ```

#### 8、del

- 用于删除文件

  ```powershell
  d:\>del 文件名
  ```

### 二、文本处理

#### 1、type

- 用于显示文本文件内容

  ```powershell
  type d:\文件名
  ```

- 重定向">"

  ```powershell
   ipconfig > c:\ip.txt	  
  ```
  - 作业1：查找重定位的其他用法，并写出对应的应用场景

-  管道符”|“

  - 将前面命令执行的结果作为后面命令的操作对象 

#### 2、findstr

- 查找文件内容（查找的某个字符串的内容）

  ```powershell
  findstr 192 c:\ip.txt #在ip.txt里查找包含192的行
  ```

### 三、网络相关操作

#### 1、配置TCP/IP参数

- TCP/IP参数

  - IP地址：标识了网络中的某一台主机

  - 子网掩码：用于标识你的IP所处的网络的范围，子网掩码越大，网络范围越小

  - 默认网关：标识与主机直连的路由器的IP地址 

  - DNS服务器：用于域名解析

    ```powershell
    #静态配置IP地址、子网掩码、默认网关
    c:\>netsh interface ip set address "Ethernet0" static 192.168.100.1 255.255.255.0 192.168.100.254
    
    ```

    ```powershell
    #自动获取 TCP/IP参数
    c:\>netsh interface ip set address "Ethernet0" dhcp
    ```

    ```powershell
    #静态配置DNS服务器
    c:\>netsh interface ip set dnsserver "Ethernet0" static 12.12.12.12
    #添加备用DNS服务器
    c:\>netsh interface ip add dnsserver "Ethernet0" 222.66.66.66 index=2 //index2 表示备用DNS
    #自动获取DNS服务区
    c:\>netsh interface ip set dnsserver "Ethernet0" dhcp
    ```

####  2、查看TCP/IP参数

- 常用

  ```powershell
  #查看所有网卡的TCP/IP参数(IP地址、子网掩码、默认网关)
  ipconfig
  #查看所有网卡的TCP/IP参数(IP地址、子网掩码、默认网关、MAC地址、DHCP地址、DNS地址、主机名)
  ipconfig /all
  #释放TCP/IP参数
  ipconfig /release
  #重新获取TCP/IP参数
  ipconfig /renew
  #刷新DNS缓存
  ipconfig /flushdns
  ```

#### 3、ping命令

- ​	用于测试TCP/IP配置是否正确

  ```
  默认3个字节，4个包
  ```

  ```powershell
  ping -n 10 -l 1000 -t -a 192.168.31.131
  #-n 10 发送10个报文
  #-l 100 单个报文100字节
  #-t 一直不停的ping
  #-a 返回IP的主机名
  ```

#### 4、tracert

- 用法

  ```powershell
  tracert 39.156.66.14
  ```

#### 5、route

- 用来操作网络路由表

  - 0.0.0.0 代表任意网络

    ```powershell
    #打印路由表
    route -4 print
    #添加路由条目
    (112.53.42.52目标地址或网络  /32代表子网掩码或者112.53.42.0目标网络，/24代表子网掩码，192.168.33.1网关地址)
    route add 112.53.42.52/32 192.168.33.1
    #删除路由条目
    route delete 112.53.42.52 （目标）
    ```

#### 6、netstat

- 用法

```powershell
#查看所有的TCP连接，包括进程
netstat -anop tcp
#查看路由表
netstat -r //等同于 route print
```

## windows用户管理

### 一、用户账户

#### 1、什么是用户账户

- 不同的用户身份拥有不同的权限

- 每个用户包含一个名称和一个密码

- 每个用户具有唯一的安全标识符

- 查看系统中的用户

  ```powershell
  net user
  ```

- 安全标识符(SID)

  - 查看当前用户的SID

    ```
    whoami /user
    ```

    - 使用注册表查看 

      - 打开注册表命令 regedit

        ```powershell
        #注册表路径
        HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\ProfileList
        ```

      - 在Windows系统中管理员的SID是500，普通用户的SID是从1000开始

#### 2、进行用户管理

- 创建用户

  - 用户名：系统里的显示名

  - 全名：用户登录时的显示名

  - A密码：Windows服务器默认需要符合复杂性要求

  - 账户已锁定：如果开启了账户锁定阈值，输错密码多次后将被锁定

    ```powershell
    #创建用户不指定密码
    net user zhangsan /add
    #删除用户
    net user zhangsan /del
    #创建用户并设置明文密码
    net user lisi qq123123 /add
    #创建用户不显示密码。*代表密码占位符
    net user wangwu /add *	
    ```

- 管理用户

- 设置密码

- 隐藏用户

  - 在用户的后面加上了$符号，隐藏用户用net user 命令是无法看到的
    - 使用命令，在Windows系统中创建隐藏用户，并提升为管理员权限。

### 二、Windows的内置用户账户

#### 1、与使用者关联的

- 管理员administrator：在使用者中具有最高权限
- 普通用户：具有一般读取权限，权限较低
- 来宾用户guest：一般提供给访客使用，权限最低，默认禁用

#### 2、与Windows组件关联的

- system 本地系统：拥有最高权限，类似于Linux里的root，但是不能登录
- local service 本地服务：权限相对于普通用户组users会低一点
- network service 网络服务：权限和普通用户组users一样

## Windows组管理

### 一、用户组

#### 1、概念

- 一组用户的集合，组中所有的用户具备所租的权限

#### 2、管理组

```powershell
#创建组
C:\Users\Administrator>net localgroup 技术部 /add
#删除组
C:\Users\Administrator>net localgroup 技术部 /del
#将zhangsan添加到技术部
C:\Users\Administrator>net localgroup 技术部 zhangsan /add 
#将zhangsan从技术部删除
C:\Users\Administrator>net localgroup 技术部 zhangsan /del
```

### 二、内置组账户

#### 1、需要人为添加的

- administrators：管理员组
- guests：来宾用户组
- power users：向下兼容的组，一般不使用
- users：标准用户组，创建用户后默认处于此组中

#### 2、动态包含成员的组

- interactive：动态包含在本地登录的用户
- authenticated users：动态包含通过验证的用户
- everyone：所有人，包含来宾用户 

## NTFS权限

### 一、NTFS权限

#### 1、文件系统

- WIndows
  - 早期Windows上使用 FAT16或FAT327
  - 目前的WIndows操作系统基本使用的是NTFS文件系统
    - ACL(访问控制列表，设置权限)
    - EFS(加密文件系统，使用BitLocker进行磁盘加密
    - 压缩及磁盘配额
  - ReFS文件系统(Windows server 2012 引入，没有广泛使用)
- Linux
  - swap：交换文件系统，主要是将磁盘的一部分空间划分给内存使用
  - ext4：使用比较广泛的文件系统

早期的FAT文件系统不支持单个大文件(超过4GB)

文件系统转换

```powershell
convert f:/fs:ntfs   //f表示需要转换的盘符
```

### 二、文件权限

#### 1、设置文件权限

- 读取数据
- 写入数据
- 附加数据
- 删除
- 执行文件

### 三、文件夹权限

#### 1、设置文件夹权限

- 列出文件夹
- 创建文件夹
- 创建文件
- 删除
- 删除子文件夹和文件

### 四、权限分类

- 完全控制

  ![image-20211224171838211](https://yang-typora.oss-cn-beijing.aliyuncs.com/202205241533930.png)

- 修改

  ![image-20211224171831129](https://yang-typora.oss-cn-beijing.aliyuncs.com/202205241533931.png)

- 读取和执行

- ![image-20211224171901468](https://yang-typora.oss-cn-beijing.aliyuncs.com/202205241533932.png)

- 读取

  ![image-20211224171928538](https://yang-typora.oss-cn-beijing.aliyuncs.com/202205241533933.png)

- 写入

  ![image-20211224172005209](https://yang-typora.oss-cn-beijing.aliyuncs.com/202205241533934.png)

- 特殊权限

  ![image-20211224172042377](https://yang-typora.oss-cn-beijing.aliyuncs.com/202205241533935.png)   

## NTFS权限规则

### 一、权限规则

#### 1、权限的累加

- 用户分配的有效权限是分配给用户所有权限的累加
  - 假如一个用户设置了读取权限，给用户所属组分配了修改权限，用户最终的权限就等于读取和修改

#### 2、拒绝权限

- 拒绝的权限大于一切(拒绝的权限优先级最高)
- 当出现权限冲突的时候，拒绝的权限优先级最高(eg：用户所属组读取权限，用户拒绝读取，最终用户没有权限)

#### 3、继承权限

-  文件或文件夹的访问控制列表默认情况下会继承上级文件夹的权限

#### 4、特殊权限

- 读取权限(和读取文件或文件夹的内容没有任何关系)
  - 读取文件或文件夹的访问控制列表
  - 针对于用户想要访问某个文件的内容，此权限必须勾选
- 更改权限(和修改文件或文件夹内容没有任何关系)
  - 用户是否可以修改文件或文件夹的访问控制列表，由于此权限是可以为用户添加或删除权限，会造成很多不安全因素，所以此权限一般不会给
  - 要想更改，前提是不许能读取
- 取得所有权限
  - 能够修改文件或文件夹的所有者
  - 前提是必须得读取和修改

## 本地安全策略

### 一、本地安全策略基本内容

#### 1、概念

- 主要是对登录到计算机的账户进行一些安全设置
- 主要影响是本地计算机安全设置

#### 2、打开方式

- 开始菜单---->管理工具---->本地安全策略

- 使用命令

  ```powershell
  secpol.msc
  ```

- 从本地组策略进去(包含本地安全策略)

  ```powershell
  gpedit.msc
  ```

### 二、账户策略

#### 1、密码策略

- 密码必须符合复杂性要求

  - 默认情况下，Windows server是开启的

    ```powershell
    不能包含用户的帐户名，不能包含用户姓名中超过两个连续字符的部分
    至少有六个字符长
    包含以下四类字符中的三类字符:
    英文大写字母(A 到 Z)
    英文小写字母(a 到 z)
    10 个基本数字(0 到 9)
    非字母字符(例如 !、$、#、%)
    ```

#### 2、账户锁定策略

- 账户锁定时间

  ```powershell
  通常来说账户锁定时间要比重置账户锁定计数器时间长
  ```

- 账户锁定阈值

- 重置账户锁定计数器时间

- 管理员不受限制

  ```powershell
  漏洞：可以暴力破解
  ```

#### 3、远程桌面命令

```powershell
mstsc
```

### 三、本地策略

1、审核策略

2、用户权限分配

3、安全选项

- ​	本地帐户的共享和安全模型

  - 经典：不改变其身份

  - 仅来宾：其身份变为来宾

    ```powershell
    只可以看到共享文件但是看不到共享内容，可以在公司内部用来连接打印机
    ```

    

## Windows文件共享

### 一、共享要求

#### 一般是局域网内使用

#### 1、物理上处于同一局域网(两台虚拟机都设置的是NAT)

- 同一公司的网络
- 同一家庭的网络
- 同一个手机热点下

#### 2、逻辑上处于同一局域网

- 直接可以ping通对方主机

### 二、共享权限

#### 1、共享权限

- 一般设置everyone完全控制

#### 2、NTFS权限

#### 3、用户从网络访问 server 的最终权限

- 由共享权限和NTFS权限的交集部分
  - eg：
    - 张三的共享权限是读取，NTFS权限是读取和写入，则最终从网络访问的权限只有读取。
  - 常用设置方法
    - 共享权限设置最大，NTFS权限进行精细化设置

- 共享权限默认有一个everyone组是读取，代表所有人

#### 三、访问共享

```powershell
\\192.168.35.134		#192.168.35.134服务器的主机名
\\WIN-VRLJAAP028V		#WIN-VRLJAAP028V服务器的主机名
```

## 组策略应用

### 一、组策略基本概念

#### 1、概念

​	是一组策略的集合

#### 2、打开方式

```
gpedit.msc
```

#### 3、刷新组策略

```
gpupdate /force
```

#### 4、模块

- 计算机配置
  - 针对本地计算机有效、
- 用户配置
  - 针对用户生效

### 二、案例

#### 	1、隐藏桌面的系统图标![image-20211228100813074](https://yang-typora.oss-cn-beijing.aliyuncs.com/202205241533936.png)

#### 	2、保护任务栏和开始菜单

![image-20211228101011782](https://yang-typora.oss-cn-beijing.aliyuncs.com/202205241533937.png)

#### 3、保护个人文档隐私(历史使用文件)

![image-20211228101332597](https://yang-typora.oss-cn-beijing.aliyuncs.com/202205241533938.png)

![image-20211228101344716](https://yang-typora.oss-cn-beijing.aliyuncs.com/202205241533939.png)

#### 4、禁用在浏览器上新窗口打开

![image-20211228102430186](https://yang-typora.oss-cn-beijing.aliyuncs.com/202205241533940.png)

#### 5、禁止使用控制面板

![image-20211228102511036](https://yang-typora.oss-cn-beijing.aliyuncs.com/202205241533941.png)

```
#打开控制面板命令
control.exe
```

#### 6、关闭自动播放

![image-20211228102849772](https://yang-typora.oss-cn-beijing.aliyuncs.com/202205241533942.png)

#### 7、自动更新

![image-20211228102958744](https://yang-typora.oss-cn-beijing.aliyuncs.com/202205241533943.png)

## 注册表基础

### 一、注册表基础

#### 1、运行

```powershell
regedit
```

#### 2、注册表结构

- 注册表以树状结构呈现

  - 子树(实际只有两颗树，为了方便操作，分成了5棵子树)

    - HKEY_CLASSES_ROOT	存储Windows可识别的文件类型的详细列表，以及相关联的程序。
      HKEY_CURRENT_USER	存储当前用户设置的信息。
      HKEY_LOCAL_MACHINE	包括安装在计算机上的硬件和软件的信息。（主要1）
      HKEY_USERS	包含使用计算机的用户的信息。（主要2）

      HKEY_CURRENT_CONFIG	这个分支包含计算机当前的硬件配置信息。

  - 项

    - 可以理解为文件夹，项中可以包含项和值

  - 值

    - 每个注册表项或者子项都可以包含称之为值的数据
    - 部分值应用于某个用户的信息
    - 值由三部分组成(名称，类型，数据)			

![image-20211228105508709](https://yang-typora.oss-cn-beijing.aliyuncs.com/202205241533944.png)

### 二、注册表基本操作

#### 1、创建项

#### 2、创建值(有六种类型)

- 字符串值():固定长度的文本字符串
- 二进制值():原始二进制数据。多数硬件组件信息都以二进制数据存储
- DWORD值():数据由4字节长的数表示。设备驱动程序和服务的很多参数都是这种类型
- QWORD值():数据由8字节长的数表示。
- 多字符串值():多重字符串。包含列表或多值的值通常为该类型
- 可扩充字符串值():长度可变的数据串。该数据类型包含在程序或服务使用该数据时解析的变量

#### 3、修改、删除和 重命名值

### 三、注册表应用

#### 1、案例

- ##### 个性化时间设置

  - ```
  HKEY_CURRENT_USER\Control Panel\Internationa下的值sTimeFormat进行修改
    ```
    
    ![image-20211228111719590](https://yang-typora.oss-cn-beijing.aliyuncs.com/202205241533945.png)

- ##### 欢迎屏幕的自定义信息

  ```
  HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System
  ```

  ![image-20211228112256063](https://yang-typora.oss-cn-beijing.aliyuncs.com/202205241533946.png)

- 禁用任务管理器
  
  - ```
    HKEY_CURRENT_USER\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System下新建DWORD值DisableTaskMgr，设置为1
    ```
  
    
  
- 禁用控制面板
  
  - ```
    HKEY_CURRENT_USER\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\Explorer下新建DWORD值NoControlPanel，设置为1
    ```
  
    
  
- 去除快捷方式下的小箭头
  
  - ```
    HKEY_CLASSES_ROOT\lnkfile下的IsShortcut值，直接删除
    ```
  
    

#### 2、注册表编辑技巧

- 查找字符串、值或项
- 将子项添加到收藏夹
- 打印注册表
- 复制项名字

## 注册表维护与优化

### 一、注册表维护

#### 1、注册表被破坏后的常见现象

- 无法启动系统
- 无法运行或正常运行合法程序
- 找不到启动系统或运行应用程序所需的文件
- 没有访问应用程序的权限
- 不能正确安装或装入驱动程序
- 不能进行网络连接
- 注册表条目有错误

#### 2、注册表被破坏的原因

- 应用程序错误：在系统安装过多的软件后，可能出现彼此的冲突
- 驱动程序不兼容
- 硬件问题
- 误操作

#### 3、备份注册表

- 直接将注册表数据文件进行备份
- 到处注册表
  - 找到对应的项目直接选择导出

#### 4、恢复注册表

- 直接将数据库文件进行覆盖
- 将之前导入的项进行导入

#### 5、锁定和解锁注册表

```
HKEY_CURRENT_USER\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System下新建DWORD值DisableRegistryTools，设置为1表示锁定，0表示解锁
```

- 当注册表被锁定后。Windows自带的注册表编辑器就无法打开，需要使用第三方注册表编辑工具进行打开，找到对应项，需改为0

### 二、注册表优化

#### 1、优化内容

- 清除多余的DLL文件
- 安装卸载应用程序的垃圾信息
- 系统安装时产生的无用信息   
  - 删除多余的时区(必要时只保留北京时区)
  - 清除多余的语言代码(英语-0409、中文-0804)
  - 删除多余的键盘布局

![image-20211228124630778](https://yang-typora.oss-cn-beijing.aliyuncs.com/202205241533947.png)

## 计算机网络基本概念

### 一、基本概念

#### 1、计算机网络的目的

- 数据通信
- 资源共享
- 增加可靠性
- 提高系统的处理能力

#### 2、计算机网络的发展

- 第一阶段
  - 分组交互网络-----阿帕网(ARPnet)
- 第二阶段
  - 标志事件：NSFnet
  - 关键技术：TCP/IP协议簇的提出
- 第三阶段
  - HTML的出现
  - 标志事件：浏览器
  - 关键性技术：web

### 二、常见的概念

#### 1、网络协议和标准

- 协议：规则(计算机网络中通信的对等实体之间交换信息需要遵循的规则的集合)
- 标准
  - 标准组织
    - ISO：(国际标准化组织)
    - ITU:国际电信联盟
    - IEEE：电气和电子工程师协会

#### 2、网络的分类

- 广域网WAN
- 城域网MAN
- 局域网LAN

#### 3、IEEE802局域网标准

- 有线局域网，1980年2月提出
  - 802.3u	实现百兆快速以太网
  - 802.3z     光纤实现千兆
  - 802.3ab   双绞线实现千兆  (超5类、6类)
  - 802.3ae   实现万兆
  - 802.3ba   实现十万兆
- 无线局域网
  - 802.11a	速率最高54Mbps(5G)
  - 802.11b    速率最高11Mbps(2.4G)
  - 802.11g     速率最高54Mbps(2.4G)
  - 802.11n    速率最高600Mbps(2.4G)

#### 4、主流的网络厂商及设备

- 网络通信设备厂商
  - 思科  
  - 华为
  - 新华三(H3C)
  - 锐捷

#### 5、网络拓扑

- 星型网络拓扑(企业中最为广泛)
  - 中心节点压力大
  - 易于实现、易于网络拓展、易于故障排查
- 网状
  - 成本非常高
  - 可靠性高
- 总线型
- 环型

## 计算机网络参考模型

### 一、OSI七层参考模型

#### 1、分层思想

#### 2、OSI参考模型

- 由于早期计算机厂商使用的是私有的网络模型，由ISO在1984年颁布，将网络分为七层
- 物理层：二进制转换为传输的电信号或光信号
- 数据链路层：建立逻辑链接，经行硬件的地址寻址，差错校验
- 网络层：进行逻辑地址寻址，实现不同网络之间的路径选择
- 传输层：定义传输数据的协议端口号，流控，差错校验
- 会话层：建立、管理、中止会话
- 表示层：数据的表示、加密、压缩等
- 应用层：将原始的数据转换为电脑能够识别的二进制数

### 二、TCP/IP(传输控制协议/网际协议)四层和五层

#### 1、四层

- 网络接口层
- 网络层
- 传输层
- 应用层

#### 2、五层

- 物理层---比特流

- 数据链路层---数据帧

- 网络层：IP---数据包

  - ARP：地址解析协议----IP地址转换为MAC地址;
  - PARP：逆地址解析协议;
  - ICMP：网际控制报文协议;
  - IGMP：网际组管理协议

- 传输层---数据段

  - TCP传输控制协议：传输更加稳定可靠
  - UDP用户数据报：传输效率比较高

- 应用层---原始数据

  - HTTP

  - HTTPS

  - SSH

  - TELNET

  - DNS

  - POP3

  - IMAP

  - TFTP

  - FTP

  - NTP

    <table>
        <tr>
        	<td><h4>
                名称
                </h4></td>
            <td><h4>
                传输数据单元
                </h4></td>
            <td><h4>
                设备
                </h4></td>
        </tr>
        <tr>
        	<td><h4>物理层</h4></td>
            <td>比特流</td>
            <td>网卡、集线器、中继器</td>
        </tr>
        <tr>
        	<td><h4>数据链路层</h4></td>
            <td>数据帧</td>
            <td>交换机、网桥</td>
        </tr>
        <tr>
        	<td><h4>网络层</h4></td>
            <td>数据包</td>
            <td>路由器</td>
        </tr>
        <tr>
        	<td><h4>传输层</h4></td>
            <td>数据段</td>
            <td>传统防火墙</td>
        </tr>
        <tr>
        	<td><h4>应用层</h4></td>
            <td>原始数据</td>
            <td>计算机</td>
        </tr>
    </table>

    

## 数据封装与解封装

### 一、封装

```
应用层：将原始数据转换为计算机识别的二进制数

传输层：由固定传输数据单元(PDU)来决定是否将数据分隔成小段，在每个小段的前面封装TCP头部，里面有一个关键字段，我们称之为端口号，可以用来表示上层数据使用什么协议或程序进行传输

网络层：进行逻辑地址寻址，进行IP头部封装，主要由两个字段字段--Src:源IP和Dst:目的IP

数据链路层：建立逻辑连接，进行物理地址寻址，当访问不同网络时，目的的MAC地址是自己网关的MAC地址；
			Ethernet--
			Source：源MAC地址
			Destination：目的MAC地址

物理层：将二进制的数转换为电信号或者光信号
```

### 二、解封装

```
物理层：电信号转换为二进制的数

数据链路层：将数据帧拆开查看目的MAC地址是否为自己的如果是继续解封，如果不是则丢弃

网络层：查看目的的IP地址

传输层：查看目的的端口号，决定访问那个数据

应用层：将二进制数转换为原始数据
```

### 三、数据的传输过程

​	

```
当穿过路由器时，会进行二层封装，源MAC变为自己出口的MAC地址，目的地址为目的路由器接口处的MAC地址
```

![image-20211228220906797](https://yang-typora.oss-cn-beijing.aliyuncs.com/202205241533948.png)

主机A现在要发送数据给主机B，发现处于不同网络中，进行数据封装

传输层：封装对应端口号

网络层：源IP为主机A的IP，目的IP为主机B的IP

数据链路层：源MAC地址为主机A的MAC地址，目的MAC是与主机A直连的路由器的接口的MAC地址---路由器A的MAC地址



接下来进行数据传输，传输过程中，遇到了二层交换机，二层交换机属于数据链路层设备，所以解封到数据链路层

根据交换机的工作原理：交互机中维护了一张MAC地址表，查看源MAC地址，在不在自己表中，如果不在自己表中，进行学习并记录到表中，再查看目标MAC地址；如果在自己表中，找到对应接口直接将原始的数据封装进行转发

接着进行数据传输，传输过程中遇到了路由器，解封到数据链路层，查看目的MAC地址是否是自己的，如果是继续解封到网络层，查看目标的IP地址，根据路由器中的路由表得出，目标IP地址是否可达，如果可达，重新进行二层封装找到对应的接口转发

## 物理层(网卡、传输介质 )

### 一、信号

#### 1、基本概念

- 进行网络通信，在线缆中传输的就是信号，网线传输电信号，光纤传输光信号
  - 信息
  - 数据
  - 信号

#### 2、分类

- 模拟信号
  - 用来表示连续变化的物理量所表达的信息
- 数字信号
  - 离散的，用二进制表示

### 二、传输介质

#### 1、同轴电缆

- 多用于以前的电视机上
- Modem
- 用在网络上最高只能达到10Mbps

#### 2、双绞线

- 传输速率高、应用广泛、技术成熟、成本低
- 屏蔽双绞线：主要用于电磁干扰比较强的场景
- 非屏蔽双绞线：主要应用于没有电磁干扰的场景
- 以太网接口
  - RJ-45接口 (水晶头)
- 连接规范
  - T568A:白绿、绿、白橙、蓝、白蓝、橙、白棕、棕
  - T568B:白橙、橙色、白绿、蓝、白蓝、绿、白棕、棕   (最常用的线序)
- 双绞线的连接
  - 标准网线：两边都是568A或者568B的线序
  - 全叉网线：一边是568A另一边是568B--以前厂商设备不支持自动转换信道，所以**同一层设备连接时就必须用全叉网线**
  - 全反线：一边是网线接口，一边是com口 console线
- 分类
  - 五类	100Mbps
  - 超五类  1000Mbps
  - 六类    1000Mbps
  - 七类     10000Mbps
- 同层设备用交叉线

#### 3、光纤(配套光模块一起使用)

- 利用光的全反射原理，传输带宽高、传输距离远、抗干扰能力强
- 光纤分类
  - 单模光纤：线芯窄，需要激光源，多用于运行商和城域网
  - 多模光纤：纤芯相对较粗，用于局域网
- 光纤接口
  - FC
  - SC
  - LC(最常用)
- 光模块

#### 4、网络接口控制器(网卡) NIC 

- 要想上网必须有网卡
- 没一块网卡都有身份标识，称为MAC地址，由48位的二进制组成，通常表示为十二位的十六进制数
- 技术点：
  - 驱动程序
  - I/O技术
- 分类
  - 标准网卡
  - PCMCIA(用于笔记本上的网卡)

### 三、制作网线

#### 1、网线钳

#### 2、测线仪

#### 3、寻线仪

## IP地址概述

### 一、IP地址的概念

#### 1、IP地址

- 用于表示网络中的某一台主机(某一个网络接口)，主机的唯一标识，保证主机间的正常通信
- 一种网络编码，用来确定网络中的一个节点
- IP地址由32位的二进制组成

#### 2、IP地址的组成

- 网络部分：用于标识网络的范围
- 主机部分：用于标识网络范围中的一个节
- 网络部分越长，表示网络的范围越小

### 二、IP地址分类

#### 1、公有IP地址分类

- ​	分类A、B、C、D、E、五类
  - A类：前8位为网络位，后24位为主机位，并且以0开头
    - 0-127
  - B类：前16位为网络位，后16位为主机位，并且以10开头
    - 128-191
  - C类：前24为网络位，后8为为主机位，以110开头
    - 192-223

#### 2、私有IP地址分类

- A :10.0.0.0-10.255.255.255

- B:172.16.0.0-172.31.255.255

- C:192.168.0.0-192.168.255.255

- 私有IP是不能够在公网上进行直接路由的，需要进行网路地址转换将私网地址转换为公网

  ![image-20211229225127272](https://yang-typora.oss-cn-beijing.aliyuncs.com/202205241533949.png)



### 三、子网掩码

​	1、概念

- 用户来确定IP地址的网络部分
- 用32位的2进制组成
  - 根据子网掩码得出网络部分和主机部分，在本网络的第一个地址就是网络地址，最后一个地址就是广播地址
  - 使用IP地址和子网掩码进行逻辑与，得出网络地址
- 网络地址代表的是一个范围，不能够给主机使用
- 广播地址，代表本网段的所有地址，也不能给主机使用
